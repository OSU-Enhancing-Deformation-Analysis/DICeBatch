<Window x:Class="DICeBatch.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DICe Batch Runner" Height="650" Width="1000"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" FontSize="20" FontWeight="SemiBold" Text="DICe Batch Runner" />

        <!-- DICe CLI path -->
        <GroupBox Grid.Row="1" Header="DICe CLI" Margin="0,10,0,0">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock VerticalAlignment="Center" Text="Executable:" Margin="0,0,8,0"/>
                <TextBox Grid.Column="1" Text="{Binding DiceExePath, UpdateSourceTrigger=PropertyChanged}" />
                <Button Grid.Column="2" Content="Browse..." Margin="8,0,0,0" Padding="12,6"
                        Command="{Binding BrowseDiceExeCommand}"/>
            </Grid>
        </GroupBox>

        <!-- Folders -->
        <GroupBox Grid.Row="2" Header="Folders" Margin="0,10,0,0">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock VerticalAlignment="Center" Text="Reference folder A:" Margin="0,0,8,0"/>
                <TextBox Grid.Column="1" Text="{Binding RefFolderA, UpdateSourceTrigger=PropertyChanged}" />
                <Button Grid.Column="2" Content="Browse..." Margin="8,0,0,0" Padding="12,6"
                        Command="{Binding BrowseRefACommand}"/>

                <TextBlock Grid.Row="1" VerticalAlignment="Center" Text="Reference folder B:" Margin="0,8,8,0"/>
                <TextBox Grid.Row="1" Grid.Column="1" Margin="0,8,0,0"
                         Text="{Binding RefFolderB, UpdateSourceTrigger=PropertyChanged}" />
                <Button Grid.Row="1" Grid.Column="2" Content="Browse..." Margin="8,8,0,0" Padding="12,6"
                        Command="{Binding BrowseRefBCommand}"/>

                <TextBlock Grid.Row="2" VerticalAlignment="Center" Text="Output folder:" Margin="0,8,8,0"/>
                <TextBox Grid.Row="2" Grid.Column="1" Margin="0,8,0,0"
                         Text="{Binding OutputFolder, UpdateSourceTrigger=PropertyChanged}" />
                <Button Grid.Row="2" Grid.Column="2" Content="Browse..." Margin="8,8,0,0" Padding="12,6"
                        Command="{Binding BrowseOutputCommand}"/>
            </Grid>
        </GroupBox>

        <!-- Params -->
        <GroupBox Grid.Row="3" Header="Parameters (example)" Margin="0,10,0,0">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock VerticalAlignment="Center" Text="Subset:" Margin="0,0,8,0"/>
                <TextBox Grid.Column="1" Text="{Binding SubsetSize}" />

                <TextBlock Grid.Column="2" VerticalAlignment="Center" Text="Step:" Margin="16,0,8,0"/>
                <TextBox Grid.Column="3" Text="{Binding StepSize}" />

                <TextBlock Grid.Column="4" VerticalAlignment="Center" Text="Threads:" Margin="16,0,8,0"/>
                <TextBox Grid.Column="5" Text="{Binding Threads}" />

                <CheckBox Grid.Column="6" Content="Skip A==B (no self-compare)" IsChecked="{Binding SkipSelfCompare}"
                          VerticalAlignment="Center" Margin="16,0,0,0"/>
            </Grid>
        </GroupBox>

        <!-- Controls -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,10,0,0">
            <Button Content="Run Batch" Padding="14,8" Command="{Binding RunCommand}" IsEnabled="{Binding CanRun}"/>
            <Button Content="Cancel" Padding="14,8" Margin="10,0,0,0" Command="{Binding CancelCommand}"
                    IsEnabled="{Binding IsRunning}"/>
            <ProgressBar Width="320" Height="18" Margin="18,4,0,0"
                         Minimum="0" Maximum="1" Value="{Binding Progress, Mode=OneWay}"/>
            <TextBlock Margin="12,0,0,0" VerticalAlignment="Center" Text="{Binding StatusText}"/>
        </StackPanel>

        <!-- Log -->
        <GroupBox Grid.Row="5" Header="Log" Margin="0,10,0,0">
            <Grid Margin="10">
                <TextBox Text="{Binding LogText, Mode=OneWay}" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                         HorizontalScrollBarVisibility="Auto" IsReadOnly="True" TextWrapping="NoWrap"/>
            </Grid>
        </GroupBox>

        <TextBlock Grid.Row="6" Margin="0,10,0,0" Foreground="Gray"
                   Text="Tip: Set Folder A = Folder B for every-image-vs-every-image in a single directory."/>
    </Grid>
</Window>
